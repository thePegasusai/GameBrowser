<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Browser-based video game footage generation using state-of-the-art diffusion models for real-time content creation" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=()" />
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; 
                   script-src 'self' 'unsafe-eval' https://cdn.jsdelivr.net; 
                   worker-src 'self' blob:; 
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
                   font-src 'self' https://fonts.gstatic.com; 
                   img-src 'self' blob: data:; 
                   connect-src 'self' https://www.google-analytics.com;" />

    <!-- Resource Hints -->
    <link rel="preconnect" href="https://www.google-analytics.com" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />
    <link rel="dns-prefetch" href="https://www.google-analytics.com" />
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />

    <!-- App Icons and Manifest -->
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <!-- External Dependencies -->
    <script defer 
            src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.production.min.js" 
            integrity="sha384-GHwEbx6+zxP6g/EBG/B4cEv8/+pp4l/3XlOY4nRXzUqR4EAGYqCh6h9+6PHJYhX"
            crossorigin="anonymous"></script>
    <script defer 
            src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.production.min.js"
            integrity="sha384-GHwEbx6+zxP6g/EBG/B4cEv8/+pp4l/3XlOY4nRXzUqR4EAGYqCh6h9+6PHJYhX"
            crossorigin="anonymous"></script>
    <script defer 
            src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.0.0/dist/tf.min.js"
            integrity="sha384-GHwEbx6+zxP6g/EBG/B4cEv8/+pp4l/3XlOY4nRXzUqR4EAGYqCh6h9+6PHJYhX"
            crossorigin="anonymous"></script>

    <title>Browser Video Game Diffusion Model</title>
</head>
<body>
    <noscript>
        <div role="alert">
            You need to enable JavaScript to run this application. This application requires modern browser features including WebGL and Web Workers.
        </div>
    </noscript>

    <div id="root" 
         role="application" 
         aria-label="Video Game Diffusion Model Application">
        <!-- React application mount point -->
    </div>

    <!-- Main Application Script -->
    <script defer src="%PUBLIC_URL%/static/js/main.js"></script>

    <!-- Browser Support Check -->
    <script>
        (function() {
            const requirements = {
                chrome: 90,
                firefox: 88,
                safari: 14,
                edge: 90
            };

            function checkBrowserSupport() {
                const ua = navigator.userAgent;
                let supported = false;

                if (/Chrome\/([0-9]+)/.test(ua)) {
                    supported = parseInt(RegExp.$1) >= requirements.chrome;
                } else if (/Firefox\/([0-9]+)/.test(ua)) {
                    supported = parseInt(RegExp.$1) >= requirements.firefox;
                } else if (/Safari\/([0-9]+)/.test(ua)) {
                    supported = parseInt(RegExp.$1) >= requirements.safari;
                } else if (/Edge\/([0-9]+)/.test(ua)) {
                    supported = parseInt(RegExp.$1) >= requirements.edge;
                }

                if (!supported) {
                    document.getElementById('root').innerHTML = 
                        '<div role="alert">Your browser version is not supported. Please upgrade to a modern browser.</div>';
                }

                // Check for WebGL support
                if (!window.WebGLRenderingContext) {
                    document.getElementById('root').innerHTML = 
                        '<div role="alert">Your browser does not support WebGL, which is required for this application.</div>';
                }
            }

            checkBrowserSupport();
        })();
    </script>
</body>
</html>